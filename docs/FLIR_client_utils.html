---

title: Flir Camera Client

keywords: fastai
sidebar: home_sidebar

summary: "Utilities for running a multi camera client"
description: "Utilities for running a multi camera client"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/93_FLIR_client_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="FLIR_Client" class="doc_header"><code>class</code> <code>FLIR_Client</code><a href="https://github.com/boxfish-research/FLIR_pubsub/tree/master/FLIR_pubsub/FLIR_client_utils.py#L18" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>FLIR_Client</code>(<strong><code>name</code></strong>=<em><code>'FrontLeft'</code></em>, <strong><code>url</code></strong>=<em><code>'localhost'</code></em>)</p>
</blockquote>
<p>Connect to an FLIR ZMQ publisher server via a ZMQ subscribe sockets and receiver FLIR camer frames</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="client" class="doc_header"><code>client</code><a href="https://github.com/boxfish-research/FLIR_pubsub/tree/master/FLIR_pubsub/FLIR_client_utils.py#L123" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>client</code>(<strong><code>name</code></strong>=<em><code>'FrontLeft'</code></em>, <strong><code>url</code></strong>=<em><code>'localhost'</code></em>)</p>
</blockquote>
<p>Received frames from a single camera. Must have the server running</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># test code</span>

<span class="n">name</span><span class="o">=</span><span class="s1">&#39;FrontLeft&#39;</span>
<span class="n">url</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Connecting to </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> on </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">client</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Connecting to FrontLeft on localhost
Connecting to server...
Finished
[INFO] approx. FPS: 2.91
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="stereo_client" class="doc_header"><code>stereo_client</code><a href="https://github.com/boxfish-research/FLIR_pubsub/tree/master/FLIR_pubsub/FLIR_client_utils.py#L170" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>stereo_client</code>(<strong><code>name1</code></strong>=<em><code>'FrontLeft'</code></em>, <strong><code>name2</code></strong>=<em><code>'FrontRight'</code></em>, <strong><code>url</code></strong>=<em><code>'localhost'</code></em>, <strong><code>video</code></strong>=<em><code>None</code></em>, <strong><code>vcodec</code></strong>=<em><code>'mjpeg'</code></em>)</p>
</blockquote>
<p>Received frames from two cameras. Must have the server running</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Test Code for stereo client   </span>
<span class="n">stereo_client</span><span class="p">(</span><span class="n">name1</span><span class="o">=</span><span class="s1">&#39;FrontLeft&#39;</span><span class="p">,</span> <span class="n">name2</span><span class="o">=</span><span class="s1">&#39;FrontRight&#39;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">video</span><span class="o">=</span><span class="s1">&#39;video.avi&#39;</span><span class="p">,</span> <span class="n">vcodec</span><span class="o">=</span><span class="s1">&#39;mjpeg&#39;</span><span class="p">)</span>    
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Connecting to server...
Connecting to server...
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Writing Frame pair FrontLeft, FrontLeft
Finished
[INFO] Chan1 approx. FPS: 2.58
[INFO] Chan1 approx. FPS: 2.58
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Installation">Installation<a class="anchor-link" href="#Installation"> </a></h2><p>Clone or download the project from <a href="https://github.com/johnnewto/FLIR_pubsub">https://github.com/johnnewto/FLIR_pubsub</a></p>
<p>Normally it is best to setup a virtual environment, call it flir, and install the requirements with<br>
<code>pip install -r requirements.txt</code>
For the client you won't necessarily need the wheel file</p>
<p>If running a client then you only need to copy or symlink the <code>FLIR_pubsub/FLIR_pubsub</code> directory as a local directory
Examples of clients are shown in <code>FLIR_pubsub/run</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2><h3 id="Example-of-a-single-camera-client">Example of a single camera client<a class="anchor-link" href="#Example-of-a-single-camera-client"> </a></h3><p><strong>flir-client.py</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span>  <span class="nn">FLIR_pubsub</span> <span class="kn">import</span> <span class="n">FLIR_client_utils</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">FLIR_client_utils</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;FrontLeft&#39;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">)</span>
    
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Example-of-a-Stereo-camera-client">Example of a Stereo camera client<a class="anchor-link" href="#Example-of-a-Stereo-camera-client"> </a></h3><p><strong>flir-stereo-client.py</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span>  <span class="nn">FLIR_pubsub</span> <span class="kn">import</span> <span class="n">FLIR_client_utils</span>
<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">FLIR_client_utils</span><span class="o">.</span><span class="n">stereo_client</span><span class="p">(</span><span class="n">name1</span><span class="o">=</span><span class="s1">&#39;FrontLeft&#39;</span><span class="p">,</span> <span class="n">name2</span><span class="o">=</span><span class="s1">&#39;FrontRight&#39;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">video</span><span class="o">=</span><span class="s1">&#39;video.avi&#39;</span><span class="p">,</span> <span class="n">vcodec</span><span class="o">=</span><span class="s1">&#39;mjpeg&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Commands">Commands<a class="anchor-link" href="#Commands"> </a></h3><p>To quit a terminal session press <code>CNTR+C</code><br>
The client seesion will display one or two openCV image windows. These can be quit by pressing <code>ESC</code> within the window.<br>
Mouse right click will also bring up a context menu allowing zooming panning and image saving.</p>
<p>flir-client.py can also save files in jpg format by pressing <code>s</code> within the window.</p>
<p>The image name saved is the Camera name with a number index appended. Pressing <code>c</code> will reset the number to 0</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Codecs-and-Encoders">Codecs and Encoders<a class="anchor-link" href="#Codecs-and-Encoders"> </a></h3><p>for recoding video you can select one of the available ffmpeg encoders. For a list of encoders type<br>
<code>ffmpeg -encoders</code></p>
<p>The default client / server here uses uses <code>mjpeg</code> because this uses less cpu over <code>h264</code> (libx264)</p>

</div>
</div>
</div>
</div>
 

